{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst initialState = {\n  categories: [],\n  questions: [],\n  quizId: null,\n  selectedAnswers: [],\n  score: null,\n  loading: false,\n  error: null,\n  submitted: false\n};\nexport const fetchCategories = createAsyncThunk(\"quiz/fetchCategories\", async () => {\n  const response = await axios.get(\"http://localhost:5000/api/categories\");\n  return response.data.trivia_categories;\n});\nexport const startQuiz = createAsyncThunk(\"quiz/startQuiz\", async ({\n  category,\n  difficulty,\n  amount\n}) => {\n  const response = await axios.post(\"http://localhost:5000/api/quiz\", {\n    category,\n    difficulty,\n    amount\n  });\n  return response.data;\n});\nexport const submitQuiz = createAsyncThunk(\"quiz/submitQuiz\", async ({\n  quizId,\n  answers\n}) => {\n  const response = await axios.post(`http://localhost:5000/api/quiz/${quizId}/submit`, {\n    answers\n  });\n  return response.data;\n});\nconst quizSlice = createSlice({\n  name: \"quiz\",\n  initialState,\n  reducers: {\n    selectAnswer: (state, action) => {\n      const {\n        questionIndex,\n        answer\n      } = action.payload;\n      state.selectedAnswers[questionIndex] = answer;\n    },\n    resetQuiz: state => {\n      return initialState;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchCategories.pending, state => {\n      state.loading = true;\n    }).addCase(fetchCategories.fulfilled, (state, action) => {\n      state.loading = false;\n      state.categories = action.payload;\n    }).addCase(fetchCategories.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message || \"Failed to fetch categories\";\n    }).addCase(startQuiz.pending, state => {\n      state.loading = true;\n    }).addCase(startQuiz.fulfilled, (state, action) => {\n      state.loading = false;\n      state.questions = action.payload.questions;\n      state.quizId = action.payload.quizId;\n      state.selectedAnswers = new Array(action.payload.questions.length).fill(\"\");\n      state.submitted = false;\n      state.score = null;\n    }).addCase(startQuiz.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message || \"Failed to start quiz\";\n    }).addCase(submitQuiz.pending, state => {\n      state.loading = true;\n    }).addCase(submitQuiz.fulfilled, (state, action) => {\n      state.loading = false;\n      state.score = action.payload.score;\n      state.submitted = true;\n    }).addCase(submitQuiz.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message || \"Failed to submit quiz\";\n    });\n  }\n});\nexport const {\n  selectAnswer,\n  resetQuiz\n} = quizSlice.actions;\nexport default quizSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","categories","questions","quizId","selectedAnswers","score","loading","error","submitted","fetchCategories","response","get","data","trivia_categories","startQuiz","category","difficulty","amount","post","submitQuiz","answers","quizSlice","name","reducers","selectAnswer","state","action","questionIndex","answer","payload","resetQuiz","extraReducers","builder","addCase","pending","fulfilled","rejected","message","Array","length","fill","actions","reducer"],"sources":["C:/Users/Jacob/Documents/Quizable/client/src/store/quizSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport { Category, Question } from \"../types\";\r\n\r\ninterface QuizState {\r\n  categories: Category[];\r\n  questions: Question[];\r\n  quizId: string | null;\r\n  selectedAnswers: string[];\r\n  score: number | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  submitted: boolean;\r\n}\r\n\r\nconst initialState: QuizState = {\r\n  categories: [],\r\n  questions: [],\r\n  quizId: null,\r\n  selectedAnswers: [],\r\n  score: null,\r\n  loading: false,\r\n  error: null,\r\n  submitted: false,\r\n};\r\n\r\nexport const fetchCategories = createAsyncThunk(\r\n  \"quiz/fetchCategories\",\r\n  async () => {\r\n    const response = await axios.get(\"http://localhost:5000/api/categories\");\r\n    return response.data.trivia_categories;\r\n  }\r\n);\r\n\r\nexport const startQuiz = createAsyncThunk(\r\n  \"quiz/startQuiz\",\r\n  async ({\r\n    category,\r\n    difficulty,\r\n    amount,\r\n  }: {\r\n    category: number;\r\n    difficulty: string;\r\n    amount: number;\r\n  }) => {\r\n    const response = await axios.post(\"http://localhost:5000/api/quiz\", {\r\n      category,\r\n      difficulty,\r\n      amount,\r\n    });\r\n    return response.data;\r\n  }\r\n);\r\n\r\nexport const submitQuiz = createAsyncThunk(\r\n  \"quiz/submitQuiz\",\r\n  async ({ quizId, answers }: { quizId: string; answers: string[] }) => {\r\n    const response = await axios.post(\r\n      `http://localhost:5000/api/quiz/${quizId}/submit`,\r\n      {\r\n        answers,\r\n      }\r\n    );\r\n    return response.data;\r\n  }\r\n);\r\n\r\nconst quizSlice = createSlice({\r\n  name: \"quiz\",\r\n  initialState,\r\n  reducers: {\r\n    selectAnswer: (state, action) => {\r\n      const { questionIndex, answer } = action.payload;\r\n      state.selectedAnswers[questionIndex] = answer;\r\n    },\r\n    resetQuiz: (state) => {\r\n      return initialState;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(fetchCategories.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(fetchCategories.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.categories = action.payload;\r\n      })\r\n      .addCase(fetchCategories.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.error.message || \"Failed to fetch categories\";\r\n      })\r\n      .addCase(startQuiz.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(startQuiz.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.questions = action.payload.questions;\r\n        state.quizId = action.payload.quizId;\r\n        state.selectedAnswers = new Array(action.payload.questions.length).fill(\r\n          \"\"\r\n        );\r\n        state.submitted = false;\r\n        state.score = null;\r\n      })\r\n      .addCase(startQuiz.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.error.message || \"Failed to start quiz\";\r\n      })\r\n      .addCase(submitQuiz.pending, (state) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(submitQuiz.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.score = action.payload.score;\r\n        state.submitted = true;\r\n      })\r\n      .addCase(submitQuiz.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.error.message || \"Failed to submit quiz\";\r\n      });\r\n  },\r\n});\r\n\r\nexport const { selectAnswer, resetQuiz } = quizSlice.actions;\r\nexport default quizSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AAczB,MAAMC,YAAuB,GAAG;EAC9BC,UAAU,EAAE,EAAE;EACdC,SAAS,EAAE,EAAE;EACbC,MAAM,EAAE,IAAI;EACZC,eAAe,EAAE,EAAE;EACnBC,KAAK,EAAE,IAAI;EACXC,OAAO,EAAE,KAAK;EACdC,KAAK,EAAE,IAAI;EACXC,SAAS,EAAE;AACb,CAAC;AAED,OAAO,MAAMC,eAAe,GAAGX,gBAAgB,CAC7C,sBAAsB,EACtB,YAAY;EACV,MAAMY,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,sCAAsC,CAAC;EACxE,OAAOD,QAAQ,CAACE,IAAI,CAACC,iBAAiB;AACxC,CACF,CAAC;AAED,OAAO,MAAMC,SAAS,GAAGhB,gBAAgB,CACvC,gBAAgB,EAChB,OAAO;EACLiB,QAAQ;EACRC,UAAU;EACVC;AAKF,CAAC,KAAK;EACJ,MAAMP,QAAQ,GAAG,MAAMX,KAAK,CAACmB,IAAI,CAAC,gCAAgC,EAAE;IAClEH,QAAQ;IACRC,UAAU;IACVC;EACF,CAAC,CAAC;EACF,OAAOP,QAAQ,CAACE,IAAI;AACtB,CACF,CAAC;AAED,OAAO,MAAMO,UAAU,GAAGrB,gBAAgB,CACxC,iBAAiB,EACjB,OAAO;EAAEK,MAAM;EAAEiB;AAA+C,CAAC,KAAK;EACpE,MAAMV,QAAQ,GAAG,MAAMX,KAAK,CAACmB,IAAI,CAC/B,kCAAkCf,MAAM,SAAS,EACjD;IACEiB;EACF,CACF,CAAC;EACD,OAAOV,QAAQ,CAACE,IAAI;AACtB,CACF,CAAC;AAED,MAAMS,SAAS,GAAGxB,WAAW,CAAC;EAC5ByB,IAAI,EAAE,MAAM;EACZtB,YAAY;EACZuB,QAAQ,EAAE;IACRC,YAAY,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC/B,MAAM;QAAEC,aAAa;QAAEC;MAAO,CAAC,GAAGF,MAAM,CAACG,OAAO;MAChDJ,KAAK,CAACrB,eAAe,CAACuB,aAAa,CAAC,GAAGC,MAAM;IAC/C,CAAC;IACDE,SAAS,EAAGL,KAAK,IAAK;MACpB,OAAOzB,YAAY;IACrB;EACF,CAAC;EACD+B,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACxB,eAAe,CAACyB,OAAO,EAAGT,KAAK,IAAK;MAC3CA,KAAK,CAACnB,OAAO,GAAG,IAAI;IACtB,CAAC,CAAC,CACD2B,OAAO,CAACxB,eAAe,CAAC0B,SAAS,EAAE,CAACV,KAAK,EAAEC,MAAM,KAAK;MACrDD,KAAK,CAACnB,OAAO,GAAG,KAAK;MACrBmB,KAAK,CAACxB,UAAU,GAAGyB,MAAM,CAACG,OAAO;IACnC,CAAC,CAAC,CACDI,OAAO,CAACxB,eAAe,CAAC2B,QAAQ,EAAE,CAACX,KAAK,EAAEC,MAAM,KAAK;MACpDD,KAAK,CAACnB,OAAO,GAAG,KAAK;MACrBmB,KAAK,CAAClB,KAAK,GAAGmB,MAAM,CAACnB,KAAK,CAAC8B,OAAO,IAAI,4BAA4B;IACpE,CAAC,CAAC,CACDJ,OAAO,CAACnB,SAAS,CAACoB,OAAO,EAAGT,KAAK,IAAK;MACrCA,KAAK,CAACnB,OAAO,GAAG,IAAI;IACtB,CAAC,CAAC,CACD2B,OAAO,CAACnB,SAAS,CAACqB,SAAS,EAAE,CAACV,KAAK,EAAEC,MAAM,KAAK;MAC/CD,KAAK,CAACnB,OAAO,GAAG,KAAK;MACrBmB,KAAK,CAACvB,SAAS,GAAGwB,MAAM,CAACG,OAAO,CAAC3B,SAAS;MAC1CuB,KAAK,CAACtB,MAAM,GAAGuB,MAAM,CAACG,OAAO,CAAC1B,MAAM;MACpCsB,KAAK,CAACrB,eAAe,GAAG,IAAIkC,KAAK,CAACZ,MAAM,CAACG,OAAO,CAAC3B,SAAS,CAACqC,MAAM,CAAC,CAACC,IAAI,CACrE,EACF,CAAC;MACDf,KAAK,CAACjB,SAAS,GAAG,KAAK;MACvBiB,KAAK,CAACpB,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACD4B,OAAO,CAACnB,SAAS,CAACsB,QAAQ,EAAE,CAACX,KAAK,EAAEC,MAAM,KAAK;MAC9CD,KAAK,CAACnB,OAAO,GAAG,KAAK;MACrBmB,KAAK,CAAClB,KAAK,GAAGmB,MAAM,CAACnB,KAAK,CAAC8B,OAAO,IAAI,sBAAsB;IAC9D,CAAC,CAAC,CACDJ,OAAO,CAACd,UAAU,CAACe,OAAO,EAAGT,KAAK,IAAK;MACtCA,KAAK,CAACnB,OAAO,GAAG,IAAI;IACtB,CAAC,CAAC,CACD2B,OAAO,CAACd,UAAU,CAACgB,SAAS,EAAE,CAACV,KAAK,EAAEC,MAAM,KAAK;MAChDD,KAAK,CAACnB,OAAO,GAAG,KAAK;MACrBmB,KAAK,CAACpB,KAAK,GAAGqB,MAAM,CAACG,OAAO,CAACxB,KAAK;MAClCoB,KAAK,CAACjB,SAAS,GAAG,IAAI;IACxB,CAAC,CAAC,CACDyB,OAAO,CAACd,UAAU,CAACiB,QAAQ,EAAE,CAACX,KAAK,EAAEC,MAAM,KAAK;MAC/CD,KAAK,CAACnB,OAAO,GAAG,KAAK;MACrBmB,KAAK,CAAClB,KAAK,GAAGmB,MAAM,CAACnB,KAAK,CAAC8B,OAAO,IAAI,uBAAuB;IAC/D,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEb,YAAY;EAAEM;AAAU,CAAC,GAAGT,SAAS,CAACoB,OAAO;AAC5D,eAAepB,SAAS,CAACqB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}